define("rvsui/app",["jquery","stapes","rvsui/route"],function(t,i,e){"use strict";return i.subclass({constructor:function(i,e){this.$el=i,this.options=t.extend({viewClass:"rvsui-view"},e),this._view=null,this._onLoad={}},route:function(t,i){var n=this;return e(t,function(){n.runView(i,arguments)}),this},run:function(){e.reload()},runView:function(i,e){var n=this;if(this._view){if(this._view.name===i)return void this._view.instantiate.run.apply(this._view.instantiate,e);this._view.instantiate.destroy()}require([i],function(s){var r=t('<div class="'+n.options.viewClass+'"></div>'),o={name:i,instantiate:new s(r,n)};n._view=o,o.instantiate.run.apply(o.instantiate,e),o.instantiate.$el.appendTo(n.$el)})}})}),define("rvsui/rivetsExt",["rivets"],function(t){"use strict";t.adapters[":"]={observe:function(t,i,e){t.on("change:"+i,e)},unobserve:function(t,i,e){t.off("change:"+i,e)},get:function(t,i){return t.get(i)},set:function(t,i,e){t.set(i,e)}},t.configure({handler:function(t,i,e){!1===this.call(e.view.models.self,t,i)&&(i.stopPropagation&&i.preventDefault?(i.stopPropagation(),i.preventDefault()):(window.event.cancelBubble=!0,window.event.returnValue=!1))}}),t.formatters.nl2br=function(t){return String(t||"").replace(/<[^>]+>/g,"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br/>$2")},t.formatters.link=function(t,i){return t?String(t)+i:""},t.formatters.has=function(t,i){return t?i:""}}),define("rvsui/route",[],function(){"use strict";return function(t){var i=[],e={},n=function(t,i){this.name=i,this.path=t,this.keys=[],this.fns=[],this.params={},this.regex=s(this.path,this.keys,!1,!1)};n.prototype.addHandler=function(t){this.fns.push(t)},n.prototype.removeHandler=function(t){for(var i=0,e=this.fns.length;e>i;i++){var n=this.fns[i];if(t==n)return void this.fns.splice(i,1)}},n.prototype.run=function(t){for(var i=0,e=this.fns.length;e>i;i++)this.fns[i].apply(this,t)},n.prototype.match=function(t,i){var e=this.regex.exec(t);if(!e)return!1;for(var n=1,s=e.length;s>n;++n){var r=this.keys[n-1],o="string"==typeof e[n]?decodeURIComponent(e[n]):e[n];r&&(this.params[r.name]=o),i.push(o)}return!0},n.prototype.toURL=function(t){var i=this.path;for(var e in t)i=i.replace("/:"+e,"/"+t[e]);if(i=i.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=i.indexOf(":"))throw new Error("missing parameters for url: "+i);return i};var s=function(t,i,e,n){return t instanceof RegExp?t:(t instanceof Array&&(t="("+t.join("|")+")"),t=t.concat(n?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,e,n,s,r,o){return i.push({name:s,optional:!!o}),e=e||"",""+(o?"":e)+"(?:"+(o?e:"")+(n||"")+(r||n&&"([^/.]+?)"||"([^/]+?)")+")"+(o||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$",e?"":"i"))},r=function(t,s){var r=t.split(" "),o=2==r.length?r[0]:null;t=2==r.length?r[1]:r[0],e[t]||(e[t]=new n(t,o),i.push(e[t])),e[t].addHandler(s)},o=function(t,i){if("function"==typeof i)r(t,i);else if("object"==typeof t)for(var e in t)r(e,t[e]);else"undefined"==typeof i&&o.navigate(t)};o.lookup=function(t,e){for(var n=0,s=i.length;s>n;n++){var r=i[n];if(r.name==t)return r.toURL(e)}},o.remove=function(t,i){var n=e[t];n&&n.removeHandler(i)},o.removeAll=function(){e={},i=[]},o.navigate=function(t,i){i=i||{};var e=i.silent||!1;e&&l(),setTimeout(function(){window.location.hash=t,e&&setTimeout(function(){h()},1)},1)};var a=function(){return window.location.hash.substring(1)},u=function(t,i){var e=[];return i.match(t,e)?(i.run(e),!0):!1},c=o.reload=function(){for(var t=a(),e=0,n=i.length;n>e;e++){var s=i[e];if(u(t,s))return}},h=function(){t.addEventListener?t.addEventListener("hashchange",c,!1):t.attachEvent("onhashchange",c)},l=function(){t.removeEventListener?t.removeEventListener("hashchange",c):t.detachEvent("onhashchange",c)};return h(),o}(window)}),define("rvsui/select",["jquery","rvsui/widgetBase"],function(t,i){"use strict";var e=t(window);i.reg("select",i.subclass({constructor:i.prototype.constructor,init:function(){this.$soure.hide(),this.isStatic=void 0!==this.$soure.attr("data-static"),this.$el=t('<div class="ui selection dropdown" />'),this.$label=t('<div class="text" />').appendTo(this.$el),this.$el.append('<i class="dropdown icon" />'),this.$list=t('<div class="menu transition hidden" tabindex="-1" />').appendTo(this.$el),this.$label.text(this.$soure.attr("placeholder")||""),this.list=null,this.syncList(),this.$soure.data("proxyEl",this.$el),this.$el.insertAfter(this.$soure)},syncList:function(){var i=this;if(null===this.list||!1===this.isStatic){this.list=[],this.$list.find(".item").remove();var e="";this.$soure.find("option").each(function(){var n=t(this),s={value:n.val(),text:n.text()};e+='<div class="item" data-value="'+s.value+'">'+s.text+"</div>",i.list.push(s)}),this.$list.html(e)}return this.list},update:function(t){if(this.$soure.val(t),this.$list.find(".selected").attr("class","item"),t){var i=this.$list.find("[data-value="+t+"]").attr("class","item active selected");i.length>0&&this.$label.text(i.text())}},showList:function(){this.$el.attr("class","ui selection dropdown active visible"),this.$list.attr("class","menu transition visible")},hideList:function(){this.$el.attr("class","ui selection dropdown"),this.$list.attr("class","menu transition hidden")},watch:function(){var i=this;this.$el.on("click",function(){return i.showList(),i.syncList(),!1===i.isStatic&&i.update(i.getValue()),!1}).on("click",".item",function(){var e=t(this),n=e.attr("data-value");return i.sync(n),i.hideList(),!1}),e.on("click.rvsuiSelect"+this.id,function(){i.hideList()})},destroy:function(){this.$el.remove(),e.off("click.rvsuiSelect"+this.id)}}))}),define("rvsui/view",["jquery","stapes","rivets","rvsui/rivetsExt"],function(t,i,e){"use strict";var n=t("title");return i.subclass({constructor:function(t,i){this.$el=t,this.app=i,this.init()},init:function(){},run:function(){},watch:function(){},setTitle:function(t){n.text(t)},back:function(){return window.history.length>1?window.history.back():window.location.href="#",!1},destroy:function(){this.unbind(),this.$el.remove()},renderString:function(i,e){var n=t.Deferred(),s=this;e=e||{},this.view||(this.$el.html(i),this.bind(),this.watch());var r=Object.keys(e);if(0===r.length)n.resolve();else{var o=[];r.forEach(function(t){o.push(e[t])}),s.when.apply(s,o).done(function(){var i=Array.prototype.slice.call(arguments);t.each(i,function(t,i){var e=r[t];e&&s.set(e,i)}),n.resolve()}).fail(function(){n.reject()})}return n.promise()},render:function(i,e){var n=this,s=t.Deferred();return this.loadTpl(i).done(function(t){n.renderString(t,e).done(function(){s.resolve()}).fail(function(){s.reject()})}),s.promise()},loadTpl:function(i){var e=t.Deferred(),n=i.split("/");return 2===n.length&&require(["tpl/"+n[0]],function(t){var i=t[n[1]];e.resolve(i)}),e.promise()},bind:function(){return this.view?this.view:(this.view=e.bind(this.$el,{self:this}),this.view)},unbind:function(){this.view&&this.view.unbind(),this.$el.off()},when:function(){return t.when.apply(this,arguments)}})}),define("rvsui/widgetBase",["jquery","stapes","rivets"],function(t,i,e){"use strict";var n=0,s=i.subclass({constructor:function(i,e){this.id=n++,this.view=e,this.$soure=t(i),this.init(),this.watch()},init:function(){},watch:function(){},getValue:function(){return this.$soure.val()},update:function(t){this.$soure.val(t)},destroy:function(){this.$soure.remove()},sync:function(t){if(-1!==this.view.keypath.indexOf(":")){var i=this.view.keypath.split(":"),e=i[0],n=i.pop(),s=n.split(".").pop(),r=this.view.observer.obj[e];r&&this.view.model.set(s,t)}}});return s.reg=function(t,i){e.binders[t]={bind:function(t){this.widget=new i(t,this)},unbind:function(){this.widget.destroy()},routine:function(t,i){this.widget.update(i||"",t)}}},s}),define("rvsui",["rvsui/app","rvsui/view","rvsui/select"],function(t,i){"use strict";return{App:t,View:i}});